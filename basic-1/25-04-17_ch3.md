## 📖 웹을 구현하는 기술    

📝 학습 내용    
### 1️⃣ 웹과 네트워크    
- 웹: 하이퍼텍스트(문서 내에 다른 문서의 위치를 참조해 서로 연결지은 것) + 인터넷  
초기에는 문자 정보 위주의 단순한 기술이었지만 현재는 각종 애플리케이션의 등장과 HTML의 사양 확장으로 다양한 용도로 이용됨
- 클라이언트-서버 모델: 클라이언트의 요청에 응답하며 365일 24시간 무중단 서비스를 목표로 하는 서버 / 사용자가 서버에 접근하기 위해 사용되며 편의성, 접근성을 중요시하는 클라이언트
- 웹 서버: 정보/서비스 제공을 위해 항상 가동되는 서버 또는 그 서버에서 실행되는 (Apache, Nginx 등) 웹 애플리케이션
  - HTML로 작성된 웹페이지를 공개하는 역할
- **HTTP**는 인터넷 상 서버-클라이언트 통신에 필요한 하이퍼텍스트 규격을 정의한 프로토콜으로  
초기에는 정보 공유를 목적으로 했기 때문에 정보를 감출 필요가 없었으나  
차츰 웹 사용 범위가 늘어나면서 암호화, 기밀 확보의 중요성이 커짐  
➡️ **HTTPS** 등장
- SSL/TLS: 인터넷 상에서 통신을 암호화하여 제삼자의 조작이나 정보 유출 방지
  - SSL 인증서: 신뢰할 수 있는 제삼자인 인증 기관(Certificate Authority)이 도메인 소유자에게 발행 / 데이터 암호화, 도메인 소유 증명, 데이터 변조 방지
  - Domain Validation: 도메인 소유만 확인, 빠르고 저렴, 민감한 정보가 없는 웹 사이트
  - Organization Validation: 웹 사이트 운영 조직의 실재성 확인, 민감한 정보
  - Extended Validation: 실재성+소재지 인증, 엄격한 심사, 대규모 기업이나 금융 서비스 등, 비싸고 신뢰성 높음, 와일드카드 인증서 불가
- URL: 인터넷 상에서 HTML이나 이미지 파일 등의 리소스 위치를 파악할 수 있는 서식
  > 스킴(프로토콜 + `://`) + 서버 주소(또는 호스트 네임 + 도메인) + 디렉터리 이름 + 파일 이름
- **DNS(Domain Name System)**: 사람이 이해하기 쉬운 도메인 이름을, 접속 가능한 실제 IP 주소로 변환하는 시스템
  - Recursive resolver: 클라이언트와 권한 있는 서버 사이에서 실제 DNS 질의 담당
  - Authoritative nameserver: 실제 DNS 레코드를 갖고 있음

### 2️⃣ 도메인
- 비영리 단체 ICANN에서 전세계 도메인 관리
- Domain Registry: 최상위 도메인의 전체 데이터베이스와 규칙 관리  
  > Verisign, KISA ...
- Domain Registrar: 사용자에게 도메인 관련 서비스 제공, 레지스트리 데이터베이스에 등록 작업 요청  
  > GoDaddy, 가비아 ... 
- TLD (Top-Level Domain): 최상위 도메인, 가장 마지막 `.` 뒤의 값 (ex. `google.com` ➡️ `.com`) 
  - gTLD: 일반 최상위 도메인, ICANN이 승인한 레지스트리가 관리, 새로운 TLD가 많이 등장하는 중
  - ccTLD: 국가 코드 최상위 도메인, 각국의 지정 기관이 관리하며 (일부 경우에는) 해당 국가 거주자만 등록 가능
- DNS TTL: DNS 레코드가 리졸버 캐시에 저장되는 시간 
  - 짧게 설정하면 유효한 IP 값을 더 잘 제공할 수 있어서 보안에 도움되며 더 정확한 정보 제공 가능하지만, 서버 부하가 커질 수 있음
  - 길게 설정하면 캐시된 값을 더 많이 사용하므로 응답이 빠르고 DNS 서버 로드를 줄일 수 있지만, 장애 조치에 부적합할 수 있음

### 3️⃣ HTTP와 웹 기술
- HTTP 요청: 처리 방식인 메서드(GET, POST, PUT ...)이름, 대상 이름 포함 
- HTTP 응답: 처리 결과를 나타내는 상태 코드(200 OK, 403 Forbidden, 404 Not Found ...), 헤더, 실제 결과인 메시지 포함
- HTTP는 데이터의 요청/전송에 대한 상태를 저장하지 않으므로 사용자의 연속된 행동에 대한 '상태'를 저장하는 다른 수단이 필요함
➡️ 쿠키(Cookie) 사용, 클라이언트가 사용자의 정보를 저장하고 요청을 보낼 때에 서버에 같이 보냄
  - 세션: 웹 사이트를 방문해 수행하는 행동의 정보를 저장, 세션 ID를 할당-쿠키에 저장해 실제 정보는 서버에 저장하는 방식으로 세션 구현
- 인증: 시스템을 사용하는 데에 필요한 본인 확인 절차, ID 인증이 대부분이지만 최근에는 다요소 인증(MFA)나 일회용 패스워드 등도 사용중
  - 위임 인증: 특정 서비스의 자격 증명을 사용하여 타 서비스에 로그인 (ex. OAuth)
- Active Directory, LDAP: 네트워크 상 디렉토리에 조직, 개인 등에 대한 데이터를 저장하고 이를 인증 기반 하에 접근할 수 있음
- SMTP: 메일 전송 프로토콜, 현재는 인증을 위해 SMTP Auth 사용
- 기존 기술의 단점을 보완하기 위해 등장한 기술들
  - HTTP/2: HTTP/1.1의 문제점을 개선하여 하나의 커넥션으로 병렬적으로 전송이 가능해 효율성 증가, 암호화된 통신이 사실상 필요 조건이기 때문에 SSL 필수
  - Ajax: 웹 페이지 전환 없이 HTTP 요청을 보내 비동기 통신을 구현, XMLHttpRequest 기반 (➡️ 양방향 통신의 어려움을 해결하기 위해 웹소켓 기술 탄생)

---
🔍 실습 / 테스트

```
# dns를 사용하여 호스트 이름으로 ip 주소 가져오기
nslookup naver.com

# 결과
Server:		192.168.50.1
Address:	192.168.50.1#53

Non-authoritative answer:
Name:	naver.com
Address: 223.130.192.247
Name:	naver.com
Address: 223.130.200.219
Name:	naver.com
Address: 223.130.192.248
Name:	naver.com
Address: 223.130.200.236
# DNS 라운드 로빈 -> 교대로 ip 주소를 반환해서 접속 분산

```

> Chrome 브라우저의 개발자 도구 (`⌘`+`⌥`+`I`) 사용하여 HTTP 응답 살펴보기  

![response header](https://imgur.com/FbjEGao.png)

---
❓DNS 질의는 구체적으로 어떻게 이루어질까? 

💡 브라우저 ➡️ OS 순서로 캐싱된 정보가 있는지 확인  
값이 없다면 Recursive resolver(= 재귀 DNS 서버, DNS 리졸버)에 질의  
값이 없다면 DNS 리졸버가 TLD 네임서버 ➡️ 책임(Authoritative) 네임서버 순서로 질의  
DNS 리졸버 ➡️ OS ➡️ 브라우저 순서대로 응답 전달 (레코드 값 캐싱)  

---
📚 참고자료

1. 『한 권으로 끝내는 네트워크 기초』, 오키타 토시야 지음, 길벗, 2022
2. [Cloudflare - DNS server types](https://www.cloudflare.com/learning/dns/dns-server-types/)
3. [NordVPN - DNS TTL](https://nordvpn.com/ko/blog/ttl-dns/)

---
💫 키워드

HTTP, HTTPS, SSL/TLS, DNS, 웹 서버, 도메인, 쿠키